!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):window.jQuery)}(function($){"use strict";var e=0;$.ajaxTransport("iframe",function(t){if(t.async){var i=t.initialIframeSrc||"javascript:false;",n,r,o;return{send:function(a,s){n=$('<form style="display:none;"></form>'),n.attr("accept-charset",t.formAcceptCharset),o=/\?/.test(t.url)?"&":"?","DELETE"===t.type?(t.url=t.url+o+"_method=DELETE",t.type="POST"):"PUT"===t.type?(t.url=t.url+o+"_method=PUT",t.type="POST"):"PATCH"===t.type&&(t.url=t.url+o+"_method=PATCH",t.type="POST"),e+=1,r=$('<iframe src="'+i+'" name="iframe-transport-'+e+'"></iframe>').bind("load",function(){var e,o=$.isArray(t.paramName)?t.paramName:[t.paramName];r.unbind("load").bind("load",function(){var e;try{if(e=r.contents(),!e.length||!e[0].firstChild)throw new Error}catch(t){e=void 0}s(200,"success",{iframe:e}),$('<iframe src="'+i+'"></iframe>').appendTo(n),window.setTimeout(function(){n.remove()},0)}),n.prop("target",r.prop("name")).prop("action",t.url).prop("method",t.type),t.formData&&$.each(t.formData,function(e,t){$('<input type="hidden"/>').prop("name",t.name).val(t.value).appendTo(n)}),t.fileInput&&t.fileInput.length&&"POST"===t.type&&(e=t.fileInput.clone(),t.fileInput.after(function(t){return e[t]}),t.paramName&&t.fileInput.each(function(e){$(this).prop("name",o[e]||t.paramName)}),n.append(t.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),t.fileInput.removeAttr("form")),n.submit(),e&&e.length&&t.fileInput.each(function(t,i){var n=$(e[t]);$(i).prop("name",n.prop("name")).attr("form",n.attr("form")),n.replaceWith(i)})}),n.append(r).appendTo(document.body)},abort:function(){r&&r.unbind("load").prop("src",i),n&&n.remove()}}}}),$.ajaxSetup({converters:{"iframe text":function(e){return e&&$(e[0].body).text()},"iframe json":function(e){return e&&$.parseJSON($(e[0].body).text())},"iframe html":function(e){return e&&$(e[0].body).html()},"iframe xml":function(e){var t=e&&e[0];return t&&$.isXMLDoc(t)?t:$.parseXML(t.XMLDocument&&t.XMLDocument.xml||$(t.body).html())},"iframe script":function(e){return e&&$.globalEval($(e[0].body).text())}}})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],e):"object"==typeof exports?e(require("jquery"),require("./vendor/jquery.ui.widget")):e(window.jQuery)}(function($){"use strict";function e(e){var t="dragover"===e;return function(i){i.dataTransfer=i.originalEvent&&i.originalEvent.dataTransfer;var n=i.dataTransfer;n&&-1!==$.inArray("Files",n.types)&&this._trigger(e,$.Event(e,{delegatedEvent:i}))!==!1&&(i.preventDefault(),t&&(n.dropEffect="copy"))}}$.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||$('<input type="file">').prop("disabled")),$.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),$.support.xhrFormDataFileUpload=!!window.FormData,$.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),$.widget("blueimp.fileupload",{options:{dropZone:$(document),pasteZone:void 0,fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(e,t){return e=this.messages[e]||e.toString(),t&&$.each(t,function(t,i){e=e.replace("{"+t+"}",i)}),e},formData:function(e){return e.serializeArray()},add:function(e,t){return e.isDefaultPrevented()?!1:void((t.autoUpload||t.autoUpload!==!1&&$(this).fileupload("option","autoUpload"))&&t.process().done(function(){t.submit()}))},processData:!1,contentType:!1,cache:!1},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:$.support.blobSlice&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(e,t,i){var n=e-this.timestamp;return(!this.bitrate||!i||n>i)&&(this.bitrate=(t-this.loaded)*(1e3/n)*8,this.loaded=t,this.timestamp=e),this.bitrate}},_isXHRUpload:function(e){return!e.forceIframeTransport&&(!e.multipart&&$.support.xhrFileUpload||$.support.xhrFormDataFileUpload)},_getFormData:function(e){var t;return"function"===$.type(e.formData)?e.formData(e.form):$.isArray(e.formData)?e.formData:"object"===$.type(e.formData)?(t=[],$.each(e.formData,function(e,i){t.push({name:e,value:i})}),t):[]},_getTotal:function(e){var t=0;return $.each(e,function(e,i){t+=i.size||1}),t},_initProgressObject:function(e){var t={loaded:0,total:0,bitrate:0};e._progress?$.extend(e._progress,t):e._progress=t},_initResponseObject:function(e){var t;if(e._response)for(t in e._response)e._response.hasOwnProperty(t)&&delete e._response[t];else e._response={}},_onProgress:function(e,t){if(e.lengthComputable){var i=Date.now?Date.now():(new Date).getTime(),n;if(t._time&&t.progressInterval&&i-t._time<t.progressInterval&&e.loaded!==e.total)return;t._time=i,n=Math.floor(e.loaded/e.total*(t.chunkSize||t._progress.total))+(t.uploadedBytes||0),this._progress.loaded+=n-t._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(i,this._progress.loaded,t.bitrateInterval),t._progress.loaded=t.loaded=n,t._progress.bitrate=t.bitrate=t._bitrateTimer.getBitrate(i,n,t.bitrateInterval),this._trigger("progress",$.Event("progress",{delegatedEvent:e}),t),this._trigger("progressall",$.Event("progressall",{delegatedEvent:e}),this._progress)}},_initProgressListener:function(e){var t=this,i=e.xhr?e.xhr():$.ajaxSettings.xhr();i.upload&&($(i.upload).bind("progress",function(i){var n=i.originalEvent;i.lengthComputable=n.lengthComputable,i.loaded=n.loaded,i.total=n.total,t._onProgress(i,e)}),e.xhr=function(){return i})},_isInstanceOf:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},_initXHRData:function(e){var t=this,i,n=e.files[0],r=e.multipart||!$.support.xhrFileUpload,o="array"===$.type(e.paramName)?e.paramName[0]:e.paramName;e.headers=$.extend({},e.headers),e.contentRange&&(e.headers["Content-Range"]=e.contentRange),r&&!e.blob&&this._isInstanceOf("File",n)||(e.headers["Content-Disposition"]='attachment; filename="'+encodeURI(n.name)+'"'),r?$.support.xhrFormDataFileUpload&&(e.postMessage?(i=this._getFormData(e),e.blob?i.push({name:o,value:e.blob}):$.each(e.files,function(t,n){i.push({name:"array"===$.type(e.paramName)&&e.paramName[t]||o,value:n})})):(t._isInstanceOf("FormData",e.formData)?i=e.formData:(i=new FormData,$.each(this._getFormData(e),function(e,t){i.append(t.name,t.value)})),e.blob?i.append(o,e.blob,n.name):$.each(e.files,function(n,r){(t._isInstanceOf("File",r)||t._isInstanceOf("Blob",r))&&i.append("array"===$.type(e.paramName)&&e.paramName[n]||o,r,r.uploadName||r.name)})),e.data=i):(e.contentType=n.type||"application/octet-stream",e.data=e.blob||n),e.blob=null},_initIframeSettings:function(e){var t=$("<a></a>").prop("href",e.url).prop("host");e.dataType="iframe "+(e.dataType||""),e.formData=this._getFormData(e),e.redirect&&t&&t!==location.host&&e.formData.push({name:e.redirectParamName||"redirect",value:e.redirect})},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e)},_getParamName:function(e){var t=$(e.fileInput),i=e.paramName;return i?$.isArray(i)||(i=[i]):(i=[],t.each(function(){for(var e=$(this),t=e.prop("name")||"files[]",n=(e.prop("files")||[1]).length;n;)i.push(t),n-=1}),i.length||(i=[t.prop("name")||"files[]"])),i},_initFormSettings:function(e){e.form&&e.form.length||(e.form=$(e.fileInput.prop("form")),e.form.length||(e.form=$(this.options.fileInput.prop("form")))),e.paramName=this._getParamName(e),e.url||(e.url=e.form.prop("action")||location.href),e.type=(e.type||"string"===$.type(e.form.prop("method"))&&e.form.prop("method")||"").toUpperCase(),"POST"!==e.type&&"PUT"!==e.type&&"PATCH"!==e.type&&(e.type="POST"),e.formAcceptCharset||(e.formAcceptCharset=e.form.attr("accept-charset"))},_getAJAXSettings:function(e){var t=$.extend({},this.options,e);return this._initFormSettings(t),this._initDataSettings(t),t},_getDeferredState:function(e){return e.state?e.state():e.isResolved()?"resolved":e.isRejected()?"rejected":"pending"},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(e,t,i){var n=$.Deferred(),r=n.promise();return t=t||this.options.context||r,e===!0?n.resolveWith(t,i):e===!1&&n.rejectWith(t,i),r.abort=n.promise,this._enhancePromise(r)},_addConvenienceMethods:function(e,t){var i=this,n=function(e){return $.Deferred().resolveWith(i,e).promise()};t.process=function(e,r){return(e||r)&&(t._processQueue=this._processQueue=(this._processQueue||n([this])).pipe(function(){return t.errorThrown?$.Deferred().rejectWith(i,[t]).promise():n(arguments)}).pipe(e,r)),this._processQueue||n([this])},t.submit=function(){return"pending"!==this.state()&&(t.jqXHR=this.jqXHR=i._trigger("submit",$.Event("submit",{delegatedEvent:e}),this)!==!1&&i._onSend(e,this)),this.jqXHR||i._getXHRPromise()},t.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",i._trigger("fail",null,this),i._getXHRPromise(!1))},t.state=function(){return this.jqXHR?i._getDeferredState(this.jqXHR):this._processQueue?i._getDeferredState(this._processQueue):void 0},t.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===i._getDeferredState(this._processQueue)},t.progress=function(){return this._progress},t.response=function(){return this._response}},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),i=t&&t.split("-"),n=i&&i.length>1&&parseInt(i[1],10);return n&&n+1},_chunkedUpload:function(e,t){e.uploadedBytes=e.uploadedBytes||0;var i=this,n=e.files[0],r=n.size,o=e.uploadedBytes,a=e.maxChunkSize||r,s=this._blobSlice,l=$.Deferred(),d=l.promise(),p,u;return this._isXHRUpload(e)&&s&&(o||r>a)&&!e.data?t?!0:o>=r?(n.error=e.i18n("uploadedBytes"),this._getXHRPromise(!1,e.context,[null,"error",n.error])):(u=function(){var t=$.extend({},e),d=t._progress.loaded;t.blob=s.call(n,o,o+a,n.type),t.chunkSize=t.blob.size,t.contentRange="bytes "+o+"-"+(o+t.chunkSize-1)+"/"+r,i._initXHRData(t),i._initProgressListener(t),p=(i._trigger("chunksend",null,t)!==!1&&$.ajax(t)||i._getXHRPromise(!1,t.context)).done(function(n,a,s){o=i._getUploadedBytes(s)||o+t.chunkSize,d+t.chunkSize-t._progress.loaded&&i._onProgress($.Event("progress",{lengthComputable:!0,loaded:o-t.uploadedBytes,total:o-t.uploadedBytes}),t),e.uploadedBytes=t.uploadedBytes=o,t.result=n,t.textStatus=a,t.jqXHR=s,i._trigger("chunkdone",null,t),i._trigger("chunkalways",null,t),r>o?u():l.resolveWith(t.context,[n,a,s])}).fail(function(e,n,r){t.jqXHR=e,t.textStatus=n,t.errorThrown=r,i._trigger("chunkfail",null,t),i._trigger("chunkalways",null,t),l.rejectWith(t.context,[e,n,r])})},this._enhancePromise(d),d.abort=function(){return p.abort()},u(),d):!1},_beforeSend:function(e,t){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(t),this._initProgressObject(t),t._progress.loaded=t.loaded=t.uploadedBytes||0,t._progress.total=t.total=this._getTotal(t.files)||1,t._progress.bitrate=t.bitrate=0,this._active+=1,this._progress.loaded+=t.loaded,this._progress.total+=t.total},_onDone:function(e,t,i,n){var r=n._progress.total,o=n._response;n._progress.loaded<r&&this._onProgress($.Event("progress",{lengthComputable:!0,loaded:r,total:r}),n),o.result=n.result=e,o.textStatus=n.textStatus=t,o.jqXHR=n.jqXHR=i,this._trigger("done",null,n)},_onFail:function(e,t,i,n){var r=n._response;n.recalculateProgress&&(this._progress.loaded-=n._progress.loaded,this._progress.total-=n._progress.total),r.jqXHR=n.jqXHR=e,r.textStatus=n.textStatus=t,r.errorThrown=n.errorThrown=i,this._trigger("fail",null,n)},_onAlways:function(e,t,i,n){this._trigger("always",null,n)},_onSend:function(e,t){t.submit||this._addConvenienceMethods(e,t);var i=this,n,r,o,a,s=i._getAJAXSettings(t),l=function(){return i._sending+=1,s._bitrateTimer=new i._BitrateTimer,n=n||((r||i._trigger("send",$.Event("send",{delegatedEvent:e}),s)===!1)&&i._getXHRPromise(!1,s.context,r)||i._chunkedUpload(s)||$.ajax(s)).done(function(e,t,n){i._onDone(e,t,n,s)}).fail(function(e,t,n){i._onFail(e,t,n,s)}).always(function(e,t,n){if(i._onAlways(e,t,n,s),i._sending-=1,i._active-=1,s.limitConcurrentUploads&&s.limitConcurrentUploads>i._sending)for(var r=i._slots.shift();r;){if("pending"===i._getDeferredState(r)){r.resolve();break}r=i._slots.shift()}0===i._active&&i._trigger("stop")})};return this._beforeSend(e,s),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(o=$.Deferred(),this._slots.push(o),a=o.pipe(l)):(this._sequence=this._sequence.pipe(l,l),a=this._sequence),a.abort=function(){return r=[void 0,"abort","abort"],n?n.abort():(o&&o.rejectWith(s.context,r),l())},this._enhancePromise(a)):l()},_onAdd:function(e,t){var i=this,n=!0,r=$.extend({},this.options,t),o=t.files,a=o.length,s=r.limitMultiFileUploads,l=r.limitMultiFileUploadSize,d=r.limitMultiFileUploadSizeOverhead,p=0,u=this._getParamName(r),f,c,h,m,g=0;if(!l||a&&void 0!==o[0].size||(l=void 0),(r.singleFileUploads||s||l)&&this._isXHRUpload(r))if(r.singleFileUploads||l||!s)if(!r.singleFileUploads&&l)for(h=[],f=[],m=0;a>m;m+=1)p+=o[m].size+d,(m+1===a||p+o[m+1].size+d>l||s&&m+1-g>=s)&&(h.push(o.slice(g,m+1)),c=u.slice(g,m+1),c.length||(c=u),f.push(c),g=m+1,p=0);else f=u;else for(h=[],f=[],m=0;a>m;m+=s)h.push(o.slice(m,m+s)),c=u.slice(m,m+s),c.length||(c=u),f.push(c);else h=[o],f=[u];return t.originalFiles=o,$.each(h||o,function(r,o){var a=$.extend({},t);return a.files=h?o:[o],a.paramName=f[r],i._initResponseObject(a),i._initProgressObject(a),i._addConvenienceMethods(e,a),n=i._trigger("add",$.Event("add",{delegatedEvent:e}),a)}),n},_replaceFileInput:function(e){var t=e.fileInput,i=t.clone(!0);e.fileInputClone=i,$("<form></form>").append(i)[0].reset(),t.after(i).detach(),$.cleanData(t.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(e,n){return n===t[0]?i[0]:n}),t[0]===this.element[0]&&(this.element=i)},_handleFileTreeEntry:function(e,t){var i=this,n=$.Deferred(),r=function(t){t&&!t.entry&&(t.entry=e),n.resolve([t])},o=function(o){i._handleFileTreeEntries(o,t+e.name+"/").done(function(e){n.resolve(e)}).fail(r)},a=function(){s.readEntries(function(e){e.length?(l=l.concat(e),a()):o(l)},r)},s,l=[];return t=t||"",e.isFile?e._file?(e._file.relativePath=t,n.resolve(e._file)):e.file(function(e){e.relativePath=t,n.resolve(e)},r):e.isDirectory?(s=e.createReader(),a()):n.resolve([]),n.promise()},_handleFileTreeEntries:function(e,t){var i=this;return $.when.apply($,$.map(e,function(e){return i._handleFileTreeEntry(e,t)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(e){e=e||{};var t=e.items;return t&&t.length&&(t[0].webkitGetAsEntry||t[0].getAsEntry)?this._handleFileTreeEntries($.map(t,function(e){var t;return e.webkitGetAsEntry?(t=e.webkitGetAsEntry(),t&&(t._file=e.getAsFile()),t):e.getAsEntry()})):$.Deferred().resolve($.makeArray(e.files)).promise()},_getSingleFileInputFiles:function(e){e=$(e);var t=e.prop("webkitEntries")||e.prop("entries"),i,n;if(t&&t.length)return this._handleFileTreeEntries(t);if(i=$.makeArray(e.prop("files")),i.length)void 0===i[0].name&&i[0].fileName&&$.each(i,function(e,t){t.name=t.fileName,t.size=t.fileSize});else{if(n=e.prop("value"),!n)return $.Deferred().resolve([]).promise();i=[{name:n.replace(/^.*\\/,"")}]}return $.Deferred().resolve(i).promise()},_getFileInputFiles:function(e){return e instanceof $&&1!==e.length?$.when.apply($,$.map(e,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(e)},_onChange:function(e){var t=this,i={fileInput:$(e.target),form:$(e.target.form)};this._getFileInputFiles(i.fileInput).always(function(n){i.files=n,t.options.replaceFileInput&&t._replaceFileInput(i),t._trigger("change",$.Event("change",{delegatedEvent:e}),i)!==!1&&t._onAdd(e,i)})},_onPaste:function(e){var t=e.originalEvent&&e.originalEvent.clipboardData&&e.originalEvent.clipboardData.items,i={files:[]};t&&t.length&&($.each(t,function(e,t){var n=t.getAsFile&&t.getAsFile();n&&i.files.push(n)}),this._trigger("paste",$.Event("paste",{delegatedEvent:e}),i)!==!1&&this._onAdd(e,i))},_onDrop:function(e){e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer;var t=this,i=e.dataTransfer,n={};i&&i.files&&i.files.length&&(e.preventDefault(),this._getDroppedFiles(i).always(function(i){n.files=i,t._trigger("drop",$.Event("drop",{delegatedEvent:e}),n)!==!1&&t._onAdd(e,n)}))},_onDragOver:e("dragover"),_onDragEnter:e("dragenter"),_onDragLeave:e("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste})),$.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(e,t){var i=-1!==$.inArray(e,this._specialOptions);i&&this._destroyEventHandlers(),this._super(e,t),i&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var e=this.options;void 0===e.fileInput?e.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):e.fileInput instanceof $||(e.fileInput=$(e.fileInput)),e.dropZone instanceof $||(e.dropZone=$(e.dropZone)),e.pasteZone instanceof $||(e.pasteZone=$(e.pasteZone))},_getRegExp:function(e){var t=e.split("/"),i=t.pop();return t.shift(),new RegExp(t.join("/"),i)},_isRegExpOption:function(e,t){return"url"!==e&&"string"===$.type(t)&&/^\/.*\/[igm]{0,3}$/.test(t)},_initDataAttributes:function(){var e=this,t=this.options,i=$(this.element[0].cloneNode(!1)),n=i.data();i.remove(),$.each(n,function(n,r){var o="data-"+n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();i.attr(o)&&(e._isRegExpOption(n,r)&&(r=e._getRegExp(r)),t[n]=r)})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(e){var t=this;e&&!this.options.disabled&&(e.fileInput&&!e.files?this._getFileInputFiles(e.fileInput).always(function(i){e.files=i,t._onAdd(null,e)}):(e.files=$.makeArray(e.files),this._onAdd(null,e)))},send:function(e){if(e&&!this.options.disabled){if(e.fileInput&&!e.files){var t=this,i=$.Deferred(),n=i.promise(),r,o;return n.abort=function(){return o=!0,r?r.abort():(i.reject(null,"abort","abort"),n)},this._getFileInputFiles(e.fileInput).always(function(n){if(!o){if(!n.length)return void i.reject();e.files=n,r=t._onSend(null,e),r.then(function(e,t,n){i.resolve(e,t,n)},function(e,t,n){i.reject(e,t,n)})}}),this._enhancePromise(n)}if(e.files=$.makeArray(e.files),e.files.length)return this._onSend(null,e)}return this._getXHRPromise(!1,e&&e.context)}})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload"],e):e("object"==typeof exports?require("jquery"):window.jQuery)}(function($){"use strict";var e=$.blueimp.fileupload.prototype.options.add;$.widget("blueimp.fileupload",$.blueimp.fileupload,{options:{processQueue:[],add:function(t,i){var n=$(this);i.process(function(){return n.fileupload("process",i)}),e.call(this,t,i)}},processActions:{},_processFile:function(e,t){var i=this,n=$.Deferred().resolveWith(i,[e]),r=n.promise();return this._trigger("process",null,e),$.each(e.processQueue,function(e,n){var o=function(e){return t.errorThrown?$.Deferred().rejectWith(i,[t]).promise():i.processActions[n.action].call(i,e,n)};r=r.pipe(o,n.always&&o)}),r.done(function(){i._trigger("processdone",null,e),i._trigger("processalways",null,e)}).fail(function(){i._trigger("processfail",null,e),i._trigger("processalways",null,e)}),r},_transformProcessQueue:function(e){var t=[];$.each(e.processQueue,function(){var i={},n=this.action,r=this.prefix===!0?n:this.prefix;$.each(this,function(t,n){i[t]="string"===$.type(n)&&"@"===n.charAt(0)?e[n.slice(1)||(r?r+t.charAt(0).toUpperCase()+t.slice(1):t)]:n}),t.push(i)}),e.processQueue=t},processing:function(){return this._processing},process:function(e){var t=this,i=$.extend({},this.options,e);return i.processQueue&&i.processQueue.length&&(this._transformProcessQueue(i),0===this._processing&&this._trigger("processstart"),$.each(e.files,function(n){var r=n?$.extend({},i):i,o=function(){return e.errorThrown?$.Deferred().rejectWith(t,[e]).promise():t._processFile(r,e)};r.index=n,t._processing+=1,t._processingQueue=t._processingQueue.pipe(o,o).always(function(){t._processing-=1,0===t._processing&&t._trigger("processstop")})})),this._processingQueue},_create:function(){this._super(),this._processing=0,this._processingQueue=$.Deferred().resolveWith(this).promise()}})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","load-image","load-image-meta","load-image-exif","load-image-ios","canvas-to-blob","./jquery.fileupload-process"],e):"object"==typeof exports?e(require("jquery"),require("load-image")):e(window.jQuery,window.loadImage)}(function($,e){"use strict";$.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadImageMetaData",disableImageHead:"@",disableExif:"@",disableExifThumbnail:"@",disableExifSub:"@",disableExifGps:"@",disabled:"@disableImageMetaDataLoad"},{action:"loadImage",prefix:!0,fileTypes:"@",maxFileSize:"@",noRevoke:"@",disabled:"@disableImageLoad"},{action:"resizeImage",prefix:"image",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",forceResize:"@",disabled:"@disableImageResize"},{action:"saveImage",quality:"@imageQuality",type:"@imageType",disabled:"@disableImageResize"},{action:"saveImageMetaData",disabled:"@disableImageMetaDataSave"},{action:"resizeImage",prefix:"preview",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",thumbnail:"@",canvas:"@",disabled:"@disableImagePreview"},{action:"setImage",name:"@imagePreviewName",disabled:"@disableImagePreview"},{action:"deleteImageReferences",disabled:"@disableImageReferencesDeletion"}),$.widget("blueimp.fileupload",$.blueimp.fileupload,{options:{loadImageFileTypes:/^image\/(gif|jpeg|png|svg\+xml)$/,loadImageMaxFileSize:1e7,imageMaxWidth:1920,imageMaxHeight:1080,imageOrientation:!1,imageCrop:!1,disableImageResize:!0,previewMaxWidth:80,previewMaxHeight:80,previewOrientation:!0,previewThumbnail:!0,previewCrop:!1,previewCanvas:!0},processActions:{loadImage:function(t,i){if(i.disabled)return t;var n=this,r=t.files[t.index],o=$.Deferred();return"number"===$.type(i.maxFileSize)&&r.size>i.maxFileSize||i.fileTypes&&!i.fileTypes.test(r.type)||!e(r,function(e){e.src&&(t.img=e),o.resolveWith(n,[t])},i)?t:o.promise()},resizeImage:function(t,i){if(i.disabled||!t.canvas&&!t.img)return t;i=$.extend({canvas:!0},i);var n=this,r=$.Deferred(),o=i.canvas&&t.canvas||t.img,a=function(e){e&&(e.width!==o.width||e.height!==o.height||i.forceResize)&&(t[e.getContext?"canvas":"img"]=e),t.preview=e,r.resolveWith(n,[t])},s;if(t.exif){if(i.orientation===!0&&(i.orientation=t.exif.get("Orientation")),i.thumbnail&&(s=t.exif.get("Thumbnail")))return e(s,a,i),r.promise();t.orientation?delete i.orientation:t.orientation=i.orientation}return o?(a(e.scale(o,i)),r.promise()):t},saveImage:function(e,t){if(!e.canvas||t.disabled)return e;var i=this,n=e.files[e.index],r=$.Deferred();return e.canvas.toBlob?(e.canvas.toBlob(function(t){t.name||(n.type===t.type?t.name=n.name:n.name&&(t.name=n.name.replace(/\..+$/,"."+t.type.substr(6)))),n.type!==t.type&&delete e.imageHead,e.files[e.index]=t,r.resolveWith(i,[e])},t.type||n.type,t.quality),r.promise()):e},loadImageMetaData:function(t,i){if(i.disabled)return t;var n=this,r=$.Deferred();return e.parseMetaData(t.files[t.index],function(e){$.extend(t,e),r.resolveWith(n,[t])},i),r.promise()},saveImageMetaData:function(e,t){if(!(e.imageHead&&e.canvas&&e.canvas.toBlob)||t.disabled)return e;var i=e.files[e.index],n=new Blob([e.imageHead,this._blobSlice.call(i,20)],{type:i.type});return n.name=i.name,e.files[e.index]=n,e},setImage:function(e,t){return e.preview&&!t.disabled&&(e.files[e.index][t.name||"preview"]=e.preview),e},deleteImageReferences:function(e,t){return t.disabled||(delete e.img,delete e.canvas,delete e.preview,delete e.imageHead),e}}})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","load-image","./jquery.fileupload-process"],e):"object"==typeof exports?e(require("jquery"),require("load-image")):e(window.jQuery,window.loadImage)}(function($,e){"use strict";$.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadAudio",prefix:!0,fileTypes:"@",maxFileSize:"@",disabled:"@disableAudioPreview"},{action:"setAudio",name:"@audioPreviewName",disabled:"@disableAudioPreview"}),$.widget("blueimp.fileupload",$.blueimp.fileupload,{options:{loadAudioFileTypes:/^audio\/.*$/},_audioElement:document.createElement("audio"),processActions:{loadAudio:function(t,i){if(i.disabled)return t;var n=t.files[t.index],r,o;return this._audioElement.canPlayType&&this._audioElement.canPlayType(n.type)&&("number"!==$.type(i.maxFileSize)||n.size<=i.maxFileSize)&&(!i.fileTypes||i.fileTypes.test(n.type))&&(r=e.createObjectURL(n))?(o=this._audioElement.cloneNode(!1),o.src=r,o.controls=!0,t.audio=o,t):t},setAudio:function(e,t){return e.audio&&!t.disabled&&(e.files[e.index][t.name||"preview"]=e.audio),e}}})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","load-image","./jquery.fileupload-process"],e):"object"==typeof exports?e(require("jquery"),require("load-image")):e(window.jQuery,window.loadImage)}(function($,e){"use strict";$.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadVideo",prefix:!0,fileTypes:"@",maxFileSize:"@",disabled:"@disableVideoPreview"},{action:"setVideo",name:"@videoPreviewName",disabled:"@disableVideoPreview"}),$.widget("blueimp.fileupload",$.blueimp.fileupload,{options:{loadVideoFileTypes:/^video\/.*$/},_videoElement:document.createElement("video"),processActions:{loadVideo:function(t,i){if(i.disabled)return t;var n=t.files[t.index],r,o;return this._videoElement.canPlayType&&this._videoElement.canPlayType(n.type)&&("number"!==$.type(i.maxFileSize)||n.size<=i.maxFileSize)&&(!i.fileTypes||i.fileTypes.test(n.type))&&(r=e.createObjectURL(n))?(o=this._videoElement.cloneNode(!1),o.src=r,o.controls=!0,t.video=o,t):t},setVideo:function(e,t){return e.video&&!t.disabled&&(e.files[e.index][t.name||"preview"]=e.video),e}}})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload-process"],e):e("object"==typeof exports?require("jquery"):window.jQuery)}(function($){"use strict";$.blueimp.fileupload.prototype.options.processQueue.push({action:"validate",always:!0,acceptFileTypes:"@",maxFileSize:"@",minFileSize:"@",maxNumberOfFiles:"@",disabled:"@disableValidation"}),$.widget("blueimp.fileupload",$.blueimp.fileupload,{options:{getNumberOfFiles:$.noop,messages:{maxNumberOfFiles:"Maximum number of files exceeded",acceptFileTypes:"File type not allowed",maxFileSize:"File is too large",minFileSize:"File is too small"}},processActions:{validate:function(e,t){if(t.disabled)return e;var i=$.Deferred(),n=this.options,r=e.files[e.index],o;return(t.minFileSize||t.maxFileSize)&&(o=r.size),"number"===$.type(t.maxNumberOfFiles)&&(n.getNumberOfFiles()||0)+e.files.length>t.maxNumberOfFiles?r.error=n.i18n("maxNumberOfFiles"):!t.acceptFileTypes||t.acceptFileTypes.test(r.type)||t.acceptFileTypes.test(r.name)?o>t.maxFileSize?r.error=n.i18n("maxFileSize"):"number"===$.type(o)&&o<t.minFileSize?r.error=n.i18n("minFileSize"):delete r.error:r.error=n.i18n("acceptFileTypes"),r.error||e.files.error?(e.files.error=!0,i.rejectWith(this,[e])):i.resolveWith(this,[e]),i.promise()}}})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","tmpl","./jquery.fileupload-image","./jquery.fileupload-audio","./jquery.fileupload-video","./jquery.fileupload-validate"],e):"object"==typeof exports?e(require("jquery"),require("tmpl")):e(window.jQuery,window.tmpl)}(function($,e){"use strict";$.blueimp.fileupload.prototype._specialOptions.push("filesContainer","uploadTemplateId","downloadTemplateId"),$.widget("blueimp.fileupload",$.blueimp.fileupload,{options:{autoUpload:!1,uploadTemplateId:"template-upload",downloadTemplateId:"template-download",filesContainer:void 0,prependFiles:!1,dataType:"json",messages:{unknownError:"Unknown error"},getNumberOfFiles:function(){return this.filesContainer.children().not(".processing").length},getFilesFromResponse:function(e){return e.result&&$.isArray(e.result.files)?e.result.files:[]},add:function(e,t){if(e.isDefaultPrevented())return!1;var i=$(this),n=i.data("blueimp-fileupload")||i.data("fileupload"),r=n.options;t.context=n._renderUpload(t.files).data("data",t).addClass("processing"),r.filesContainer[r.prependFiles?"prepend":"append"](t.context),n._forceReflow(t.context),n._transition(t.context),t.process(function(){return i.fileupload("process",t)}).always(function(){t.context.each(function(e){$(this).find(".size").text(n._formatFileSize(t.files[e].size))}).removeClass("processing"),n._renderPreviews(t)}).done(function(){t.context.find(".start").prop("disabled",!1),n._trigger("added",e,t)!==!1&&(r.autoUpload||t.autoUpload)&&t.autoUpload!==!1&&t.submit()}).fail(function(){t.files.error&&t.context.each(function(e){var i=t.files[e].error;i&&$(this).find(".error").text(i)})})},send:function(e,t){if(e.isDefaultPrevented())return!1;var i=$(this).data("blueimp-fileupload")||$(this).data("fileupload");return t.context&&t.dataType&&"iframe"===t.dataType.substr(0,6)&&t.context.find(".progress").addClass(!$.support.transition&&"progress-animated").attr("aria-valuenow",100).children().first().css("width","100%"),i._trigger("sent",e,t)},done:function(e,t){if(e.isDefaultPrevented())return!1;var i=$(this).data("blueimp-fileupload")||$(this).data("fileupload"),n=t.getFilesFromResponse||i.options.getFilesFromResponse,r=n(t),o,a;t.context?t.context.each(function(n){var s=r[n]||{error:"Empty file upload result"};a=i._addFinishedDeferreds(),i._transition($(this)).done(function(){var n=$(this);o=i._renderDownload([s]).replaceAll(n),i._forceReflow(o),i._transition(o).done(function(){t.context=$(this),i._trigger("completed",e,t),i._trigger("finished",e,t),a.resolve()})})}):(o=i._renderDownload(r)[i.options.prependFiles?"prependTo":"appendTo"](i.options.filesContainer),i._forceReflow(o),a=i._addFinishedDeferreds(),i._transition(o).done(function(){t.context=$(this),i._trigger("completed",e,t),i._trigger("finished",e,t),a.resolve()}))},fail:function(e,t){if(e.isDefaultPrevented())return!1;var i=$(this).data("blueimp-fileupload")||$(this).data("fileupload"),n,r;
t.context?t.context.each(function(o){if("abort"!==t.errorThrown){var a=t.files[o];a.error=a.error||t.errorThrown||t.i18n("unknownError"),r=i._addFinishedDeferreds(),i._transition($(this)).done(function(){var o=$(this);n=i._renderDownload([a]).replaceAll(o),i._forceReflow(n),i._transition(n).done(function(){t.context=$(this),i._trigger("failed",e,t),i._trigger("finished",e,t),r.resolve()})})}else r=i._addFinishedDeferreds(),i._transition($(this)).done(function(){$(this).remove(),i._trigger("failed",e,t),i._trigger("finished",e,t),r.resolve()})}):"abort"!==t.errorThrown?(t.context=i._renderUpload(t.files)[i.options.prependFiles?"prependTo":"appendTo"](i.options.filesContainer).data("data",t),i._forceReflow(t.context),r=i._addFinishedDeferreds(),i._transition(t.context).done(function(){t.context=$(this),i._trigger("failed",e,t),i._trigger("finished",e,t),r.resolve()})):(i._trigger("failed",e,t),i._trigger("finished",e,t),i._addFinishedDeferreds().resolve())},progress:function(e,t){if(e.isDefaultPrevented())return!1;var i=Math.floor(t.loaded/t.total*100);t.context&&t.context.each(function(){$(this).find(".progress").attr("aria-valuenow",i).children().first().css("width",i+"%")})},progressall:function(e,t){if(e.isDefaultPrevented())return!1;var i=$(this),n=Math.floor(t.loaded/t.total*100),r=i.find(".fileupload-progress"),o=r.find(".progress-extended");o.length&&o.html((i.data("blueimp-fileupload")||i.data("fileupload"))._renderExtendedProgress(t)),r.find(".progress").attr("aria-valuenow",n).children().first().css("width",n+"%")},start:function(e){if(e.isDefaultPrevented())return!1;var t=$(this).data("blueimp-fileupload")||$(this).data("fileupload");t._resetFinishedDeferreds(),t._transition($(this).find(".fileupload-progress")).done(function(){t._trigger("started",e)})},stop:function(e){if(e.isDefaultPrevented())return!1;var t=$(this).data("blueimp-fileupload")||$(this).data("fileupload"),i=t._addFinishedDeferreds();$.when.apply($,t._getFinishedDeferreds()).done(function(){t._trigger("stopped",e)}),t._transition($(this).find(".fileupload-progress")).done(function(){$(this).find(".progress").attr("aria-valuenow","0").children().first().css("width","0%"),$(this).find(".progress-extended").html("&nbsp;"),i.resolve()})},processstart:function(e){return e.isDefaultPrevented()?!1:void $(this).addClass("fileupload-processing")},processstop:function(e){return e.isDefaultPrevented()?!1:void $(this).removeClass("fileupload-processing")},destroy:function(e,t){if(e.isDefaultPrevented())return!1;var i=$(this).data("blueimp-fileupload")||$(this).data("fileupload"),n=function(){i._transition(t.context).done(function(){$(this).remove(),i._trigger("destroyed",e,t)})};t.url?(t.dataType=t.dataType||i.options.dataType,$.ajax(t).done(n).fail(function(){i._trigger("destroyfailed",e,t)})):n()}},_resetFinishedDeferreds:function(){this._finishedUploads=[]},_addFinishedDeferreds:function(e){return e||(e=$.Deferred()),this._finishedUploads.push(e),e},_getFinishedDeferreds:function(){return this._finishedUploads},_enableDragToDesktop:function(){var e=$(this),t=e.prop("href"),i=e.prop("download"),n="application/octet-stream";e.bind("dragstart",function(e){try{e.originalEvent.dataTransfer.setData("DownloadURL",[n,i,t].join(":"))}catch(r){}})},_formatFileSize:function(e){return"number"!=typeof e?"":e>=1e9?(e/1e9).toFixed(2)+" GB":e>=1e6?(e/1e6).toFixed(2)+" MB":(e/1e3).toFixed(2)+" KB"},_formatBitrate:function(e){return"number"!=typeof e?"":e>=1e9?(e/1e9).toFixed(2)+" Gbit/s":e>=1e6?(e/1e6).toFixed(2)+" Mbit/s":e>=1e3?(e/1e3).toFixed(2)+" kbit/s":e.toFixed(2)+" bit/s"},_formatTime:function(e){var t=new Date(1e3*e),i=Math.floor(e/86400);return i=i?i+"d ":"",i+("0"+t.getUTCHours()).slice(-2)+":"+("0"+t.getUTCMinutes()).slice(-2)+":"+("0"+t.getUTCSeconds()).slice(-2)},_formatPercentage:function(e){return(100*e).toFixed(2)+" %"},_renderExtendedProgress:function(e){return this._formatBitrate(e.bitrate)+" | "+this._formatTime(8*(e.total-e.loaded)/e.bitrate)+" | "+this._formatPercentage(e.loaded/e.total)+" | "+this._formatFileSize(e.loaded)+" / "+this._formatFileSize(e.total)},_renderTemplate:function(e,t){if(!e)return $();var i=e({files:t,formatFileSize:this._formatFileSize,options:this.options});return i instanceof $?i:$(this.options.templatesContainer).html(i).children()},_renderPreviews:function(e){e.context.find(".preview").each(function(t,i){$(i).append(e.files[t].preview)})},_renderUpload:function(e){return this._renderTemplate(this.options.uploadTemplate,e)},_renderDownload:function(e){return this._renderTemplate(this.options.downloadTemplate,e).find("a[download]").each(this._enableDragToDesktop).end()},_startHandler:function(e){e.preventDefault();var t=$(e.currentTarget),i=t.closest(".template-upload"),n=i.data("data");t.prop("disabled",!0),n&&n.submit&&n.submit()},_cancelHandler:function(e){e.preventDefault();var t=$(e.currentTarget).closest(".template-upload,.template-download"),i=t.data("data")||{};i.context=i.context||t,i.abort?i.abort():(i.errorThrown="abort",this._trigger("fail",e,i))},_deleteHandler:function(e){e.preventDefault();var t=$(e.currentTarget);this._trigger("destroy",e,$.extend({context:t.closest(".template-download"),type:"DELETE"},t.data()))},_forceReflow:function(e){return $.support.transition&&e.length&&e[0].offsetWidth},_transition:function(e){var t=$.Deferred();return $.support.transition&&e.hasClass("fade")&&e.is(":visible")?e.bind($.support.transition.end,function(i){i.target===e[0]&&(e.unbind($.support.transition.end),t.resolveWith(e))}).toggleClass("in"):(e.toggleClass("in"),t.resolveWith(e)),t},_initButtonBarEventHandlers:function(){var e=this.element.find(".fileupload-buttonbar"),t=this.options.filesContainer;this._on(e.find(".start"),{click:function(e){e.preventDefault(),t.find(".start").click()}}),this._on(e.find(".cancel"),{click:function(e){e.preventDefault(),t.find(".cancel").click()}}),this._on(e.find(".delete"),{click:function(i){i.preventDefault(),t.find(".toggle:checked").closest(".template-download").find(".delete").click(),e.find(".toggle").prop("checked",!1)}}),this._on(e.find(".toggle"),{change:function(e){t.find(".toggle").prop("checked",$(e.currentTarget).is(":checked"))}})},_destroyButtonBarEventHandlers:function(){this._off(this.element.find(".fileupload-buttonbar").find(".start, .cancel, .delete"),"click"),this._off(this.element.find(".fileupload-buttonbar .toggle"),"change.")},_initEventHandlers:function(){this._super(),this._on(this.options.filesContainer,{"click .start":this._startHandler,"click .cancel":this._cancelHandler,"click .delete":this._deleteHandler}),this._initButtonBarEventHandlers()},_destroyEventHandlers:function(){this._destroyButtonBarEventHandlers(),this._off(this.options.filesContainer,"click"),this._super()},_enableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",!1).parent().removeClass("disabled")},_disableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",!0).parent().addClass("disabled")},_initTemplates:function(){var t=this.options;t.templatesContainer=this.document[0].createElement(t.filesContainer.prop("nodeName")),e&&(t.uploadTemplateId&&(t.uploadTemplate=e(t.uploadTemplateId)),t.downloadTemplateId&&(t.downloadTemplate=e(t.downloadTemplateId)))},_initFilesContainer:function(){var e=this.options;void 0===e.filesContainer?e.filesContainer=this.element.find(".files"):e.filesContainer instanceof $||(e.filesContainer=$(e.filesContainer))},_initSpecialOptions:function(){this._super(),this._initFilesContainer(),this._initTemplates()},_create:function(){this._super(),this._resetFinishedDeferreds(),$.support.fileInput||this._disableFileInputButton()},enable:function(){var e=!1;this.options.disabled&&(e=!0),this._super(),e&&(this.element.find("input, button").prop("disabled",!1),this._enableFileInputButton())},disable:function(){this.options.disabled||(this.element.find("input, button").prop("disabled",!0),this._disableFileInputButton()),this._super()}})});
//# sourceMappingURL=./jquery.fileupload.all.min.js.map